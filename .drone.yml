kind: pipeline
name: default

steps: 
- name: backend
  image: python
  commands:
  - pip install -r requirements.txt
  - py ../init_db.py
  - py ../decol_demo/app.py

- name: build
  image: plugins/docker
  settings:
    username: zssacbbt
    password: Zss1327230
    repo: zssacbbt/docol
    tags:
     - latest
     - '1.0.1'
     - '1.0'
  
services:
- name: database
  image: postgres:10-alpine
  ports:
  - 5432
  environment:
    POSTGRES_USER: saisi
    POSTGRES_PASSWORD: pass
    POSTGRES_DB: docol